(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[356],{36956:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(63857),i=n(43081),o=n.n(i),a=n(30638),c=n(33413),s=n(14232),l=n(73301),p=n(10553),u=n(89099),h=n(46264),d=n(37876);let f=function(e){var t,n=e.templateId,i=e.position,f=e.size,v=void 0===f?"medium":f,m=e.isBlock,b=e.color,g=void 0===b?"#ff4d6d":b,w=(0,s.useState)(!1),x=w[0],y=w[1],j="authenticated"===(0,p.useSession)().status,O=(0,u.useRouter)(),k=(0,h.p)(),S=k.initializeFavorites,z=k.toggleFavorite,A=k.isFavorite;(0,s.useEffect)(function(){j&&S()},[j,S]);var E=(t=(0,r.A)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=2;break}return e.abrupt("return");case 2:if(j){e.next=6;break}return l.Ay.error("Vui l\xf2ng đăng nhập để th\xeam v\xe0o danh s\xe1ch y\xeau th\xedch"),O.push("/login?redirect=".concat(O.asPath)),e.abrupt("return");case 6:return y(!0),e.prev=7,t=A(n),e.next=11,z(n);case 11:e.sent?l.Ay.success(t?"Đ\xe3 x\xf3a khỏi danh s\xe1ch y\xeau th\xedch":"Đ\xe3 th\xeam v\xe0o danh s\xe1ch y\xeau th\xedch"):l.Ay.error("Kh\xf4ng thể cập nhật trạng th\xe1i y\xeau th\xedch. Vui l\xf2ng thử lại sau."),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),console.error("Error updating favorite status:",e.t0),l.Ay.error("Đ\xe3 xảy ra lỗi. Vui l\xf2ng thử lại sau.");case 19:return e.prev=19,y(!1),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[7,15,19,22]])})),function(){return t.apply(this,arguments)}),P={small:20,medium:24,large:32}[v];return(0,d.jsx)("button",{onClick:E,disabled:x,className:"".concat(void 0!==m&&m?"block":"absolute"," ").concat("small"===v?"w-8 h-8":"w-10 h-10"," ").concat({"top-right":"top-3 right-3","top-left":"top-3 left-3"}[void 0===i?"top-right":i]," z-40 flex items-center justify-center bg-white bg-opacity-70 backdrop-blur-sm rounded-full shadow-md hover:bg-opacity-90 transition-all duration-200"),"aria-label":A(n)?"X\xf3a khỏi y\xeau th\xedch":"Th\xeam v\xe0o y\xeau th\xedch",children:A(n)?(0,d.jsx)(a.A,{style:{fontSize:P,color:g}}):(0,d.jsx)(c.A,{style:{fontSize:P,color:g}})})}},46962:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(27002),i=n.n(r);n(14232);var o=n(37876);let a=function(e){var t=e.children,n=e.containerWidth;return(0,o.jsxs)("div",{style:{backgroundColor:"#f0f2f5",height:"100vh",width:"100vw",paddingTop:"5vh"},className:"jsx-3147566159 pc-container",children:[(0,o.jsx)("div",{style:{width:n?"".concat(n,"px"):"auto",height:"90vh",margin:"auto",position:"relative",border:"1px solid #e0e0e0",boxShadow:"0 0 10px 0 rgba(0, 0, 0, 0.1)",borderRadius:3,overflow:"hidden"},className:"jsx-3147566159 pc-content",children:t}),(0,o.jsx)(i(),{id:"3147566159",children:["#app-view-index{height:100% !important;}",".pc-container #cinelove-toolbar .message-box-button{width:130px;}",".pc-container #cinelove-toolbar .message-box-button,.pc-container #cinelove-toolbar #animation-gift-preview-btn,.pc-container #cinelove-toolbar #cinelove-gift-button,.pc-container #cinelove-toolbar #cinelove-like-button{font-size:12px;height:35px;line-height:35px;border-radius:25px;}",".pc-container #cinelove-toolbar #animation-gift-preview-btn span{font-size:12px;}",".pc-container #cinelove-toolbar #cinelove-like-button,.pc-container #cinelove-toolbar #cinelove-gift-button{width:35px;}",".pc-container .bar-messwin *{-webkit-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}",".pc-container .bar-gift-new .select-type .option{font-size:17px !important;cursor:pointer;}",".pc-container .bar-gift-new .gift-li .title{font-size:10px !important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;width:70px;}",".pc-container .bar-gift-new .give-tip{font-size:10px !important;}",".pc-container .bar-gift-new .give-username{-webkit-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}",".pc-container .animate-slide-gift.gift-minibar *{-webkit-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}",".pc-container #cinelove-canvas-preview,.pc-container #cinelove-canvas{-webkit-transform:scale(0.95);-ms-transform:scale(0.95);transform:scale(0.95);}"]})]})}},62684:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/template/pc/[templateSlug]",function(){return n(83450)}])},83450:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__N_SSP:()=>C,default:()=>R});var r=n(59860),i=n(42969),o=n(27925),a=n(63857),c=n(43081),s=n.n(c),l=n(66125),p=n(14232),u=n(6428),h=n.n(u),d=n(33845),f=n.n(d),v=n(16752),m=n(4105),b=n(46962),g=n(89099),w=n(733),x=n(62867),y=n(32939),j=n(43107),O=n(83240),k=n(36956),S=n(80277),z=n(32716),A=n(72567),E=n(54737),P=n(37876),T=["editorViewportWidth"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=!0;let R=function(e){var t=e.templateData,n=e.templateId,i=e.canonicalUrl,c=(0,g.useRouter)(),u=(0,w.bi)().setPageId,d="true"===c.query.onlyPreview,_=(0,p.useState)(!1),C=_[0],R=_[1];(0,p.useEffect)(function(){var e;u(n),(e=(0,a.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,j.Xc)(n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error tracking template view:",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(){return e.apply(this,arguments)})()},[n,c,t.slug]);var D=JSON.parse(h().decompress(h().decodeBase64(t.templateData))),I=(0,p.useState)(!0),L=I[0],V=I[1],B=(0,p.useMemo)(function(){return(0,E.n)(D)},[]),F=B.hasEnvelope&&B.preventScrollUntilOpened,W=(0,p.useState)(D),X=W[0],K=W[1],M=(0,p.useState)(0),H=M[0],U=M[1];(0,p.useEffect)(function(){var e=function(){V(!0);var e=parseInt(D.ROOT.props.width),t=parseInt(D.ROOT.props.height),n=H/e,i=Math.max(t*n,.9*window.innerHeight),a=Object.entries(D).reduce(function(e,t){var r=(0,o.A)(t,2),i=r[0],a=r[1];if(!a.props)return e[i]=a,e;var c=N(N({},a.props),{},{top:a.props.top*n,left:a.props.left*n,width:a.props.width*n,height:a.props.height*n,fontSize:a.props.fontSize*n});return e[i]=N(N({},a),{},{props:c}),e},{}),c=D.ROOT.props,s=(c.editorViewportWidth,(0,r.A)(c,T));a.ROOT=N(N({},D.ROOT),{},{props:N(N({},s),{},{width:H,height:i})}),K(a),setTimeout(function(){V(!1)},1e3)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[H]),(0,p.useEffect)(function(){var e=function(){var e=Math.round(.55*(.9*window.innerHeight));e>500?U(500):U(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var q="".concat(t.templateName," - ").concat((0,z.g)(t.categoryId)," miễn ph\xed");return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(x.bV,{title:q,titleTemplate:"%s | CineLove",defaultTitle:"CineLove",description:"".concat(q," - Thiệp online tr\xean CineLove"),canonical:i,openGraph:{type:"website",url:i,title:q,description:"".concat(q," - Thiệp online tr\xean CineLove"),images:[{url:t.thumbnail||"/cinelove-default-thumbnail.jpg",width:1200,height:630,alt:q}],siteName:"CineLove"},twitter:{handle:"@cinelove",site:"@cinelove",cardType:"summary_large_image"}}),(0,P.jsx)(b.A,{containerWidth:H,children:(0,P.jsx)(m.A,{isTemplatePreview:!0,device:"pc",pageData:t,shouldPreventScroll:F,children:(0,P.jsxs)(y.Z,{isProcessing:L,className:"h-full",scrollSpeed:.06,initialDelay:2e3,rootBackground:X.ROOT.props.backgroundColor,shouldPreventScroll:F,children:[L&&(0,P.jsx)("div",{className:"absolute inset-0 bg-white z-50 flex items-center justify-center",children:(0,P.jsx)(f(),{animationData:v,loop:!0,style:{width:200,height:200}})}),(0,P.jsx)(l.KE,{resolver:S.K6,enabled:!1,children:(0,P.jsx)(l.wI,{data:X},X.ROOT.props.width)})]})})}),(0,P.jsxs)("div",{className:"fixed top-2 left-2 z-50",children:[!d&&(0,P.jsx)(O.Ay,{onClick:function(){return c.push("/editor-template/".concat(n))},children:"Chỉnh sửa mẫu n\xe0y"}),d&&(0,P.jsx)(O.Ay,{onClick:function(){R(!0)},type:"primary",className:"bg-gradient-to-r from-pink-500 to-purple-600 border-0 hover:from-pink-600 hover:to-purple-700",children:"Đặt thiệp n\xe0y"}),(0,P.jsx)(k.A,{templateId:n,isBlock:!0,size:"medium"})]}),d&&(0,P.jsx)(A.A,{open:C,onCancel:function(){return R(!1)},templateId:n,onSuccess:function(){console.log("Package selection completed successfully")}})]})}}},e=>{e.O(0,[3634,7884,3433,530,6701,888,8433,8513,4938,8511,713,3753,3629,241,2517,9942,9897,1385,5711,289,1285,7141,9026,9923,8470,3301,878,8594,3521,3401,9556,5503,3566,9084,501,1805,6499,8561,8593,8972,7692,7974,916,1210,981,4085,4587,456,5958,9271,4038,5818,3587,7315,8353,7603,8162,1508,4510,5293,9032,700,5675,1078,636,6593,8792],()=>e(e.s=62684)),_N_E=e.O()}]);